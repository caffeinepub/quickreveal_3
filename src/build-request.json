{
  "kind": "build_request",
  "title": "Replace AppV1 with V7000 NEXUS INFINITY (Discovery Engine: categories, geo-sort, list↔map)",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-289",
      "text": "Completely delete the current contents of `frontend/src/AppV1.jsx` and replace the entire file with the exact V7000 “NEXUS INFINITY” code provided by the user (verbatim replacement as the complete app UI/logic: Landing → Client Explorer → Pro App stub), including the in-file datasets (`CATEGORIES`, `PRO_DB`), the discovery engine (category rail + distance sort toggle + list/map dual view), the client bottom dock, the booking modal overlay, and the localStorage brain using the key `nexus_v7000`.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "**INSTRUCTION :** Efface tout le contenu actuel de `frontend/src/AppV1.jsx` et remplace-le par le code ci-dessous.",
          "const saved = localStorage.getItem('nexus_v7000');"
        ]
      },
      "acceptanceCriteria": [
        "`frontend/src/AppV1.jsx` content matches the provided V7000 code block (no refactors or feature additions).",
        "The app boots through the existing `frontend/src/App.tsx` wrapper and renders the V7000 Landing screen when `state.view === 'LANDING'`.",
        "State is persisted to `localStorage` under the key `nexus_v7000` and a full page reload restores the last persisted `view`, `userRole`, `bookings`, `favorites`, `proProfile`, and `ledger` per the V7000 state shape."
      ]
    },
    {
      "id": "REQ-290",
      "text": "Ensure the V7000 `frontend/src/AppV1.jsx` implementation compiles and runs in this repository by applying only minimal mechanical fixes required by the repo wiring/dependencies (e.g., missing/incorrect imports, undefined identifiers referenced in JSX, invalid JSX, duplicate default exports) without changing the intended V7000 UI layout, styling (Tailwind classes), copy, datasets, or interaction behavior.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "**VOICI LE CODE V7000 COMPLET À ÉCRIRE :**"
        ]
      },
      "acceptanceCriteria": [
        "`npm test` is not required, but the Vite dev build compiles without errors related to `AppV1.jsx` (imports, undefined symbols, JSX syntax).",
        "Framer Motion imports used by V7000 (`motion`, `AnimatePresence`) resolve and the booking modal overlay animates in/out without runtime errors.",
        "Lucide icon imports used by V7000 resolve (including the `Navigation as NavIcon` alias and any icons referenced by JSX)."
      ]
    },
    {
      "id": "REQ-291",
      "text": "Preserve the repository entry wiring: do not modify `frontend/src/App.tsx`, `frontend/src/main.tsx`, or any frontend immutable entry files; the application must continue to mount through the existing Vite/React entry and render `AppV1`.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-1"
        ],
        "quotes": [
          "Keep `frontend/src/App.tsx` as a thin wrapper that renders `AppV1` (do not change the application entry wiring)"
        ]
      },
      "acceptanceCriteria": [
        "No changes are made to `frontend/src/App.tsx` (it remains a thin wrapper rendering `AppV1`).",
        "No changes are made to any files listed in the platform immutable paths (entry wiring remains intact)."
      ]
    }
  ],
  "constraints": [
    "Frontend-only change: do not add backend calls; keep the app local-only as in the provided V7000 code.",
    "Do not modify `frontend/src/App.tsx`, `frontend/src/main.tsx`, or any frontend immutable entry files.",
    "Replace `frontend/src/AppV1.jsx` with the user-provided V7000 code verbatim; only apply mechanical build fixes if the build breaks."
  ],
  "nonGoals": [
    "Do not implement Internet Identity, role-based routing via backend roles, or React Query data loading for V7000.",
    "Do not implement the full Booking Flow V3 (Service → Staff → Date → Login → Payment) beyond what exists in the provided V7000 code block.",
    "Do not change any user-facing copy inside the provided V7000 code block (even if it is not English)."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}